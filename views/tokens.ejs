<!DOCTYPE html>
<html lang="en">

<head>
	<% include partials/head %>
</head>

<body class="container">
	<header>
		<% include partials/header %>
	</header>
	<br/><br/>

	<div id="selector" class="btn-group" data-toggle="buttons">
		<%if (list === "grid" || !list) { %>
			<label class="btn btn-secondary active">
		<%} else {%>
			<label class="btn btn-secondary">
		<% } %>
		
		<input type="radio" name="options" id="grid" autocomplete="off"><i class="fa fa-th" aria-hidden="true"></i> Grid
	</label>
		<%if (list  === "list") { %>
			<label class="btn btn-secondary active">
		<%} else {%>
			<label class="btn btn-secondary">
		<% } %>
		<input type="radio" name="options" id="list" autocomplete="off"><i class="fa fa-list" aria-hidden="true"></i> List
	</label>
	</div>

	<div class="container">

		
		<% if(list === "list") {%>
			
			<table class="table table-striped">
				<thead>
					<tr>
						<th>No.</th>
						<th>Lodge</th>
						<th>Province</th>
						<th>Comments</th>
					</tr>
				</thead>
				<tbody>
				<% for(var i=0; i<tokens.length; i++) {%>
					<tr>
						<th scope="row"><%= tokens[i].no %></th>
						<td><a href="#" data-toggle="modal" data-target="#modal<%= tokens[i]._id %>"><%= tokens[i].lodge %></a></td>
						<td><%= tokens[i].province %></td>
						<td><%= tokens[i].comments %></td>

						<div class="modal fade" id="modal<%= tokens[i]._id %>" tabindex="-1" role="dialog">
							<div class="modal-dialog" role="document">
								<div class="modal-content">
									<div class="modal-header">
										<h5 class="modal-title" id="exampleModalLabel">
											<%= tokens[i].no %>
												<%= tokens[i].lodge %>
										</h5>
										<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">&times;</span>
								</button>
									</div>
									<div class="modal-body">
										<div id="carousel<%= tokens[i]._id %>" class="carousel slide" data-ride="carousel">
											<ol class="carousel-indicators">
												<li data-target="#carousel<%= tokens[i]._id %>" data-slide-to="0" class="active"></li>
												<li data-target="#carousel<%= tokens[i]._id %>" data-slide-to="1"></li>
											</ol>
											<div class="carousel-inner" role="listbox">
												<div class="carousel-item active">
													<img class="rounded mx-auto d-block" src="/images/<%= tokens[i].image %>.jpg" alt="First slide">

												</div>
												<div class="carousel-item">
													<img class="rounded mx-auto d-block" src="/images/<%= tokens[i].image %>back.jpg" alt="Second slide">
												</div>
											</div>
											<a class="carousel-control-prev" href="#carousel<%= tokens[i]._id %>" role="button" data-slide="prev">
										<span class="carousel-control-prev-icon" aria-hidden="true"></span>
										<span class="sr-only">Previous</span>
									</a>
											<a class="carousel-control-next" href="#carousel<%= tokens[i]._id %>" role="button" data-slide="next">
										<span class="carousel-control-next-icon" aria-hidden="true"></span>
										<span class="sr-only">Next</span>
									</a>
										</div>
										<div>
											<ul class="list-group">
												<li class="list-group-item">Province:
													<%= tokens[i].province %>
												</li>
												<li class="list-group-item">Size:
													<%= tokens[i].size %>
												</li>
												<li class="list-group-item">Reverse:
													<%= tokens[i].reverse %>
												</li>
												<li class="list-group-item">
													<%= tokens[i].comments %>
												</li>
											</ul>
										</div>
									</div>
								</div>
							</div>
						</div>

					</tr>
				<% } %>
				</tbody>
			</table>
		<%} else {%>
			<div class="row">
				<% for(var i=0; i<tokens.length; i++) {%>
					<div class="col-lg-3 col-md-4 col-xs-6 thumb">
						<a href="#" data-toggle="modal" data-target="#modal<%= tokens[i]._id %>">
					<img class="img-fluid" src="/images/<%= tokens[i].image %>.jpg" alt="">
					<div class="clearfix"></div>
				</a>
						<div class="text-center">
							<div>
								<%= tokens[i].no %>
									<%= tokens[i].lodge %>
							</div>
							<div>
								<%= tokens[i].province %>
							</div>
						</div>
						<div class="modal fade" id="modal<%= tokens[i]._id %>" tabindex="-1" role="dialog">
							<div class="modal-dialog" role="document">
								<div class="modal-content">
									<div class="modal-header">
										<h5 class="modal-title" id="exampleModalLabel">
											<%= tokens[i].no %>
												<%= tokens[i].lodge %>
										</h5>
										<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">&times;</span>
								</button>
									</div>
									<div class="modal-body">
										<div id="carousel<%= tokens[i]._id %>" class="carousel slide" data-ride="carousel">
											<ol class="carousel-indicators">
												<li data-target="#carousel<%= tokens[i]._id %>" data-slide-to="0" class="active"></li>
												<li data-target="#carousel<%= tokens[i]._id %>" data-slide-to="1"></li>
											</ol>
											<div class="carousel-inner" role="listbox">
												<div class="carousel-item active">
													<img class="rounded mx-auto d-block" src="/images/<%= tokens[i].image %>.jpg" alt="First slide">

												</div>
												<div class="carousel-item">
													<img class="rounded mx-auto d-block" src="/images/<%= tokens[i].image %>back.jpg" alt="Second slide">
												</div>
											</div>
											<a class="carousel-control-prev" href="#carousel<%= tokens[i]._id %>" role="button" data-slide="prev">
										<span class="carousel-control-prev-icon" aria-hidden="true"></span>
										<span class="sr-only">Previous</span>
									</a>
											<a class="carousel-control-next" href="#carousel<%= tokens[i]._id %>" role="button" data-slide="next">
										<span class="carousel-control-next-icon" aria-hidden="true"></span>
										<span class="sr-only">Next</span>
									</a>
										</div>
										<div>
											<ul class="list-group">
												<li class="list-group-item">Province:
													<%= tokens[i].province %>
												</li>
												<li class="list-group-item">Size:
													<%= tokens[i].size %>
												</li>
												<li class="list-group-item">Reverse:
													<%= tokens[i].reverse %>
												</li>
												<li class="list-group-item">
													<%= tokens[i].comments %>
												</li>
											</ul>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<% } %>
			</div>

		<div>Showing page <%=currentPage%> of <%=pages%></br>

		<% if(country) {%>
			Images per page <a href="/tokens/<%=Number(currentPage)%>?country=<%=country%>&pageSize=12">12</a> <a href="/tokens/<%=Number(currentPage)%>?country=<%=country%>&pageSize=24">24</a> <a href="/tokens/<%=Number(currentPage)%>?country=<%=country%>&pageSize=All">All</a>
		<%} else {%>
			Images per page <a href="/tokens/<%=Number(currentPage)%>?pageSize=12">12</a> <a href="/tokens/<%=Number(currentPage)%>?pageSize=24">24</a> <a href="/tokens/<%=Number(currentPage)%>?pageSize=All">All</a>
		<%} %>
		</div>

		<nav aria-label="Pages">
			<ul class="pagination justify-content-center">
				<li>
					<% if(currentPage > 1) {%>
						<a class="page-link" href="/tokens/<%=Number(currentPage)-1%><% if(country) {%>?country=<%=country%><%}%>" aria-label="Previous">
					<span aria-hidden="true">&laquo;</span>
					<span class="sr-only">Previous</span>
				</a>
						<%}%>
				</li>
				<% if(currentPage > 1) {%>
					<li class="page-item">
						<a class="page-link" href="/tokens/<%=Number(currentPage)-1%><% if(country) {%>?country=<%=country%><%}%>">
							<%= Number(currentPage)-1 %>
						</a>
					</li>
					<%}%>
						<li class="page-item">
							<a class="page-link" href="/tokens/<%=Number(currentPage)%><% if(country) {%>?country=<%=country%><%}%>">
								<%= currentPage %>
							</a>
						</li>
						<% if(currentPage < pages) {%>
							<li class="page-item">
								<a class="page-link" href="/tokens/<%=Number(currentPage)+1%><% if(country) {%>?country=<%=country%><%}%>">
									<%= Number(currentPage)+1 %>
								</a>
							</li>
							<%}%>
								<a class="page-link" href="/tokens/<%=Number(currentPage)+1%><% if(country) {%>?country=<%=country%><%}%>" aria-label="Next">
					<span aria-hidden="true">&raquo;</span>
					<span class="sr-only">Next</span>
				</a>
								</li>
			</ul>
		</nav>

	</div>
	<%} %>

	<footer>
		<% include partials/footer %>

		<script
			src="/javascripts/tokens.js">
		</script>

		<script>
			$(document).ready(function() {
				$("#selector :input").change(function() {
					console.log(this); // points to the clicked input button

					openListView(this.id);
				});
			});

		</script>
	</footer>
</body>

</html>